(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22220,(e,t,l)=>{t.exports=e.r(1505)},29886,e=>{"use strict";var t=e.i(56818),l=e.i(32910),s=e.i(22220);let r=e=>{let t=Math.floor(e/60);return`${t.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`},n=e=>{let[t,l]=e.split(":").map(Number);return 60*t+l};function i(){let e=(0,s.useRouter)(),i=(0,s.useSearchParams)().get("id"),[a,o]=(0,l.useState)(null),[c,u]=(0,l.useState)(!0),[d,x]=(0,l.useState)(0),[m,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1),[b,g]=(0,l.useState)(0),[j,S]=(0,l.useState)(0),[N,v]=(0,l.useState)(0),y=(0,l.useRef)(null),w=(0,l.useCallback)((t=!1)=>{clearInterval(Number(y.current)),h(!1),p(!1),t?alert("Session completed!"):alert("Session ended!"),e.push("/")},[e]),[I,R]=(0,l.useState)([]),[k,C]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(i&&1){let t=JSON.parse(localStorage.getItem("intervalTimerSessions")||"[]").find(e=>e.id===i);if(t){o(t);let e=[];t.items.forEach(t=>{for(let l=1;l<=t.repetitions;l++)e.push({...t,repetition:l,totalRepetitions:t.repetitions}),t.subItems&&t.subItems.forEach(s=>{s.disregardInLastRepetition&&l===t.repetitions||e.push({...s,repetitions:1,repetition:l,totalRepetitions:t.repetitions,color:s.color||t.color})})}),R(e);let l=e.reduce((e,t)=>e+n(t.duration),0);S(l),g(l),e.length>0&&x(n(e[0].duration))}else alert("Session not found!"),e.push("/");u(!1)}},[i,e]),(0,l.useEffect)(()=>{if(m&&d>0)y.current=setInterval(()=>{x(e=>e-1),g(e=>e-1),v(e=>e+1)},1e3);else if(0===d&&f)if(clearInterval(Number(y.current)),k<I.length-1){let e=k+1;C(e),x(n(I[e].duration)),v(0)}else w(!0);else!m&&y.current&&clearInterval(Number(y.current));return()=>{y.current&&clearInterval(Number(y.current))}},[m,d,k,I,f,w]);let T=()=>{if(!f){let e=JSON.parse(localStorage.getItem("intervalTimerSessions")||"[]").map(e=>e.id===i?{...e,lastRunAt:Date.now()}:e);localStorage.setItem("intervalTimerSessions",JSON.stringify(e))}h(!0),p(!0)},E=I[k],O=I[k+1],L=j>0?(j-b)/j*100:0;return c?(0,t.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24 bg-gray-900 text-white",children:(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Loading Session..."})}):a&&i?(0,t.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 md:p-24 text-white transition-colors duration-500",style:{backgroundColor:E?.color||"#1a202c"},children:[(0,t.jsxs)("div",{className:"fixed top-0 left-0 w-full h-8 bg-gray-700 z-50",children:[(0,t.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-1000 ease-linear relative",style:{width:`${L}%`}}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm drop-shadow-md",children:r(b)})})]}),(0,t.jsxs)("div",{className:"w-full max-w-4xl text-center",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold mb-8",children:a.name}),E&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"text-3xl font-semibold",children:["Current Task: ",(0,t.jsx)("span",{className:"text-blue-400",children:E.title})]}),E.totalRepetitions>1&&(0,t.jsxs)("p",{className:"text-xl mt-2",children:[E.repetition," of ",E.totalRepetitions]}),(0,t.jsx)("p",{className:"text-8xl font-extrabold mt-4",children:r(d)})]}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4 mt-8",children:[!f&&(0,t.jsx)("button",{onClick:T,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-full text-lg",children:"Start Session"}),f&&m&&(0,t.jsx)("button",{onClick:()=>{h(!1)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full text-lg",children:"Pause"}),f&&!m&&(0,t.jsx)("button",{onClick:T,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full text-lg",children:"Resume"}),(0,t.jsx)("button",{onClick:()=>{if(a)if(clearInterval(Number(y.current)),g(e=>e-(d-N)),k<I.length-1){let e=k+1;C(e),x(n(I[e].duration)),v(0)}else w(!0)},className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-3 px-6 rounded-full text-lg",children:"Skip"}),f&&!m&&(0,t.jsx)("button",{onClick:()=>w(!1),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-full text-lg",children:"End Session"})]}),(0,t.jsx)("div",{className:"mt-12 text-xl text-gray-400",children:O?(0,t.jsxs)("p",{children:["Next: ",(0,t.jsx)("span",{className:"font-semibold",children:O.title})]}):(0,t.jsx)("p",{children:"Last item"})})]})]}):(0,t.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24 bg-gray-900 text-white",children:(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Session not found."})})}function a(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(i,{})})}e.s(["default",()=>a],29886)}]);